# Docker engine security

## Best practices

- Disable password based authentication
- Enable ssh key based authentication
- Determine users who needs access to server

- When exposing docker to outside, only allow from withing the company private network
- When exposing docker daemon outside, use a SSL connexion with SSL cert
    **Note** Check docker document for SSL configuration


## Namespace & Capabilities

Docker uses namespaces to isolates network, processes, workspaces, IPC (inter process communication)
and mount point.

**Note** By default, docker run container using a root user. To override default behavior, use `USER <USERNAME>`
in your `Dockerfile`

**Note** Root user within the container is not the same root user on the docker host system, it's only
         root on the container, otherwise it will have the capability to shutdown the host system, etc...

## CGroups

They are technology that handles management of system resources like RAM, Processor and Network etc.
Docker uses cGroups to limit resources used by container on a host system.

- Limiting CPU usage

> Complexity Fair Scheduler     -> Default Linux scheduler (Provides processes with equals amount of CPU resources)
> Realtime Scheduler            -> Use by docker version >= 1.1.30

> docker container run --cpu-shares=512 <Image>                             # Tells the container the available CPU resource to share
> docker container run --cpuset-cpus=<StartIndex>-<EndIndex> <Image>        # Tells the running container to use only the CPU labelled 0 and 1
> docker container run --cpu-count=<Percentage> <Image>                     # Tell container to use the restricted percent specified